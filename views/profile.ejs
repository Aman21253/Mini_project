<%- include('partials/header') %>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= user.name %>'s Profile</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>
<body class="bg-zinc-900 text-white">

    <section class="max-w-5xl mx-auto mt-10 px-6">
        <!-- Profile Header -->
        <div class="flex items-center gap-6 border-b border-zinc-700 pb-6">
            <div class="w-24 h-24 rounded-full overflow-hidden border-2 border-blue-500 shadow-md">
                <img class="w-full h-full object-cover" src="/images/uploads/<%= user.profilepic %>" alt="Profile Picture">
            </div>
            <div>
                <h1 class="text-3xl font-semibold">Hello, <span class="text-blue-400"><%= user.name %></span></h1>
                <p class="text-zinc-400 mt-1 text-sm">Welcome back to MiniGram ðŸ‘‹</p>
            </div>
        </div>

        <!-- Create Post Section -->
        <div class="mt-8 bg-zinc-800 p-6 rounded-2xl shadow-md border border-zinc-700">
            <h2 class="text-xl mb-3 text-blue-400 font-semibold">Create a New Post</h2>
            <form method="post" action="/post">
                <textarea 
                    name="content"
                    placeholder="What's on your mind?"
                    class="p-3 w-full resize-none bg-zinc-900 text-white rounded-md border border-zinc-700 outline-none focus:ring-2 focus:ring-blue-500 min-h-[100px]">
                </textarea>
                <input 
                    class="px-5 py-2 mt-3 bg-blue-500 hover:bg-blue-600 transition rounded-md text-sm font-medium cursor-pointer"
                    type="submit" 
                    value="Post">
            </form>
        </div>

        <!-- Posts Section -->
        <div class="mt-10">
            <h2 class="text-2xl mb-5 font-semibold text-zinc-300">Your Posts</h2>
            <div class="space-y-5">
                <% user.posts.reverse().forEach(function(post){ %>
                    <div class="p-5 rounded-xl bg-zinc-800 border border-zinc-700 hover:border-blue-500 transition">
                        <div class="flex justify-between items-center mb-2">
                            <h4 class="text-blue-400 font-medium">@<%= user.name %></h4>
                            <small class="text-zinc-500"><%= post.likes ? post.likes.length : 0 %> likes</small>
                        </div>
                        <p class="text-sm text-zinc-300 mb-3"><%= post.content %></p>
                        <div class="flex gap-5 text-sm">
                            <a href="/like/<%= post._id %>" class="text-blue-400 hover:text-blue-300 transition">
                                <%= post.likes.includes(user._id) ? "Unlike" : "Like" %>
                            </a>
                            <a href="/edit/<%= post._id %>" class="text-zinc-400 hover:text-white transition">Edit</a>
                        </div>
                    </div>
                <% }); %>
            </div>
        </div>
    </section>
</body>
</html>